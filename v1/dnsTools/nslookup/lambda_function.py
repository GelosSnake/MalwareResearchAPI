import socket
import json

def return_code(status, body):
    return {"statusCode": status,"body": json.dumps(body)}

def getHostByName(hostname):
    try:
        result =  socket.gethostbyname_ex(hostname)
        return {'code':'SUCCESS','content':result}
    except Exception as E:
        return {'code':'ERROR','content':'Unkown'}

def lambda_handler(event, context):
    try:
        if event['pathParameters'] and event['pathParameters']['proxy']:
            result = getHostByName(event['pathParameters']['proxy'])
            return return_code(200,(result['content']))
        else:
            return return_code(400, 'domain name or ip param must be present.')
    except Exception as E:
        print(E)
        return return_code(501, 'Internal server error')